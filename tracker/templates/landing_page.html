{% extends 'base_content.html' %}
{% block content %}
<div class='row'>
    <div class = 'col'>
        <div class="card main-cardOne">
            <b style="font-size:larger; text-align:center; padding-bottom:10px">Recent Spending</b>
            <table class="table">
                <thead>
                    <tr>
                        <th scope="col">Title</th>
                        <th scope="col">Expense</th>
                        <th scope="col">Time</th>
                    </tr>
                </thead>
                <tbody>
                    <div class="Spending">
                        {% for spending in spendings %}
                            <tr>
                                <td>{{ spending.title }}</td>
                                <td>{{ spending.expense }}</td>
                                <td>{{ spending.date_created|date:"M" }}.{{ spending.date_created.day }}</td>
                            </tr>
                        {% endfor %}
                    </div>
                </tbody>
            </table>
            <h2><a href='{% url 'expenditure_list' %}' class="btn btn-primary">View Full Expenditures</a></h2>
        </div>
        <div class="card main-cardFive">
            <p>More functions</p>
            <p>to be implemented</p>
        </div>
    </div>
    <div class = 'col'>
        <div class = 'row'>
            <div class="card main-cardTwo">
                <form method="POST" enctype='multipart/form-data'>
                    {% csrf_token %}
                    {% include 'partials/bootstrap_form.html' with form=form %}
                    <input type="submit" value="+  ADD  A  NEW  SPENDING" class='btn btn-primary'>
                </form>
            </div>
            <div class="card main-cardThree">
                <p>target or gamification stuff</p>
                <p>to be implemented</p>
            </div>
        </div>
        <div class = 'row'>
            <div class="card main-cardFour">
                <!-- JavaScript to print the chart -->
                <div class = 'row'>
                    <div style="width:250px; margin-top:10px">
                        <canvas id="expensePieChart"></canvas>
                    </div> 
                    <div style="width:570px; margin-left:30px">
                        <canvas id="expenseBarChart"></canvas>
                    </div>     
                </div>    
                <div class = 'row'>
                    <div style="width:100%; margin-top:50px">
                        <canvas id="expenseLineChart"></canvas>
                    </div>  
                </div>
                <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>       
                <script>
                    const ctx1 = document.getElementById('expensePieChart');
                    new Chart(ctx1, {
                        type: 'doughnut',
                        data: {
                            labels: [{%for data in categoryList%}'{{data}}',{%endfor%}],
                            datasets: [{
                                label: 'Expense',
                                data: [{%for data in expenseList%}'{{data}}',{%endfor%}],
                                borderWidth: 1
                            }]
                        },
                    });
                </script>
                <script>
                    const ctx2 = document.getElementById('expenseBarChart');
                    new Chart(ctx2, {
                        type: 'bar',
                        data: {
                            labels: [{%for data in dateList%}'{{data}}',{%endfor%}],
                            datasets: [{
                                label: 'Expense',
                                data: [{%for data in dailyExpenseList%}'{{data}}',{%endfor%}],
                                borderWidth: 1
                            }]
                        },
                    });
                </script>
                <script>
                    const ctx3 = document.getElementById('expenseLineChart');
                    new Chart(ctx3, {
                        type: 'line',
                        data: {
                            labels: [{%for data in dateList%}'{{data}}',{%endfor%}],
                            datasets: [{
                                label: 'Expense',
                                data: [{%for data in cumulativeExpenseList%}'{{data}}',{%endfor%}],
                                borderWidth: 1
                            }]
                        },
                    });
                </script>
            </div>
        </div>
    </div>
</div>
{% endblock %}


